

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>CG Albums &mdash; Mysterious Messenger Wiki v3.3.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Miscellaneous" href="miscellaneous.html" />
    <link rel="prev" title="Creating Characters" href="creating-characters.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Mysterious Messenger Wiki
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="Home.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Full Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits-and-acknowledgements.html">Credits and Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginners-guide.html">Beginner’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-setup.html">Git Setup</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="chatrooms.html">Chatrooms</a></li>
<li class="toctree-l1"><a class="reference internal" href="phone-calls.html">Phone Calls</a></li>
<li class="toctree-l1"><a class="reference internal" href="text-messages.html">Text Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="story-mode.html">Story Mode (VN)</a></li>
<li class="toctree-l1"><a class="reference internal" href="emails.html">Emails</a></li>
<li class="toctree-l1"><a class="reference internal" href="route-setup.html">Setting up a Route</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot-branches.html">Plot Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating-characters.html">Creating Characters</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CG Albums</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#adding-a-cg-album">Adding a CG Album</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#albums-associated-a-character">Albums Associated a Character</a></li>
<li class="toctree-l3"><a class="reference internal" href="#albums-not-associated-with-a-character">Albums not Associated With a Character</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#defining-a-cg">Defining a CG</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#large-thumbnails">Large Thumbnails</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-a-cg-after-starting-the-game">Adding a CG After Starting the Game</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hiding-albums-until-unlocked">Hiding Albums Until Unlocked</a></li>
<li class="toctree-l2"><a class="reference internal" href="#showing-a-cg-in-a-chatroom-or-text-message">Showing a CG in a Chatroom or Text Message</a></li>
<li class="toctree-l2"><a class="reference internal" href="#showing-a-cg-during-story-mode">Showing a CG during Story Mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="miscellaneous.html">Miscellaneous</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mysterious Messenger Wiki</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>CG Albums</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/cg-albums.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cg-albums">
<h1>CG Albums<a class="headerlink" href="#cg-albums" title="Permalink to this headline">¶</a></h1>
<div class="section" id="adding-a-cg-album">
<h2>Adding a CG Album<a class="headerlink" href="#adding-a-cg-album" title="Permalink to this headline">¶</a></h2>
<div class="section" id="albums-associated-a-character">
<h3>Albums Associated a Character<a class="headerlink" href="#albums-associated-a-character" title="Permalink to this headline">¶</a></h3>
<p>For this tutorial, this example shows how to add a character named Emma to the game. You can view Emma’s character definition and more in <a class="reference internal" href="creating-characters.html#adding-a-new-character-to-chatrooms"><span class="std std-ref">Adding a New Character to Chatrooms</span></a>.</p>
<p>Albums are defined in <code class="docutils literal notranslate"><span class="pre">gallery_album_definitions.rpy</span></code>. There are two images to define and one album variable.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prior to v3.3.0, the game required two album definitions, a variable and a persistent version. The current version combines both of these into one. If you were using the previous version, your album images should automatically update on game launch, and then you can switch over to the current way of defining albums.</p>
</div>
<p>First, under the heading <strong>Album Cover Images</strong>, you will see images that look like <code class="docutils literal notranslate"><span class="pre">cg_label_ja</span></code>. This is the background of the small label that contains the name of the album. For Emma, you will define an image like:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">image</span> <span class="n">cg_label_em</span> <span class="o">=</span> <span class="s2">&quot;CGs/label_bg_em.webp&quot;</span>
</pre></div>
</div>
<p>The important thing is that it is called <code class="docutils literal notranslate"><span class="pre">cg_label_em</span></code> where <code class="docutils literal notranslate"><span class="pre">em</span></code> is the character’s file_id. You can look at the existing images to see what they look like. The CG label is typically 241x64 px.</p>
<p>Below that is a set of images like <code class="docutils literal notranslate"><span class="pre">ja_album_cover</span></code>. This is the image that will be displayed as a button to click and open the album. It typically has an image of the associated character and is 157x137 px. Emma’s image definition will look like:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">image</span> <span class="n">em_album_cover</span> <span class="o">=</span> <span class="s2">&quot;CGs/em_album_cover.webp&quot;</span>
</pre></div>
</div>
<p>The important part is that it’s called <code class="docutils literal notranslate"><span class="pre">em_album_cover</span></code> where <code class="docutils literal notranslate"><span class="pre">em</span></code> is the character’s file_id.</p>
<p>Next, you need to define the album:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">define</span> <span class="n">em_album</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<p>The album should be the character’s file_id + album, so in this case it’s <code class="docutils literal notranslate"><span class="pre">em_album</span></code>.</p>
<p>At the bottom of the file, you will also see a definition for the variable <code class="docutils literal notranslate"><span class="pre">all_albums</span></code>. You need to add Emma’s file_id here so that her album shows up in the Album screen:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">default</span> <span class="n">all_albums</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;ju&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;ja&#39;</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;common&#39;</span><span class="p">,</span> <span class="s1">&#39;em&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>You can reorganize this list as you see fit. Albums are organized in rows of three on the Album screen. So, the following definition would be equally correct, depending on which characters you wanted to have albums:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">default</span> <span class="n">all_albums</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;ju&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;ja&#39;</span><span class="p">,</span> <span class="s1">&#39;em&#39;</span><span class="p">,</span> <span class="s1">&#39;common&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If a player has already unlocked an image inside an album, it will be automatically added to <code class="docutils literal notranslate"><span class="pre">all_albums</span></code>. If you’re making a new route and don’t want some characters’ albums to appear, you must both 1) remove them from <code class="docutils literal notranslate"><span class="pre">all_albums</span></code> and 2) Use <code class="docutils literal notranslate"><span class="pre">Reset</span> <span class="pre">Persistent</span></code> from the Ren’Py launcher to cause Ren’Py to forget which CGs you unlocked over other routes.</p>
</div>
</div>
<div class="section" id="albums-not-associated-with-a-character">
<h3>Albums not Associated With a Character<a class="headerlink" href="#albums-not-associated-with-a-character" title="Permalink to this headline">¶</a></h3>
<p>If you want an album that isn’t associated with any particular character, such as a “Common” album, the program expects you to follow certain naming conventions so it can find the correct album cover, label, and variables.</p>
<p>For example, if you wanted to add a “New Year’s” album, you must do the following:</p>
<ol class="arabic simple">
<li><p>Add “new year’s” to the <code class="docutils literal notranslate"><span class="pre">all_albums</span></code> definition. If a string is all lowercase, the first letter will be capitalized when it is displayed on the Album screen, but otherwise capitalization is preserved. Also note the use of double quotes (“) instead of single so you don’t have to escape the apostrophe.</p></li>
</ol>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">default</span> <span class="n">all_albums</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;ju&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;ja&#39;</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;common&#39;</span><span class="p">,</span> <span class="s2">&quot;New Year&#39;s&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Determine what the program will expect the variables to be called.</p></li>
</ol>
<p>The program uses a specific naming scheme to process strings into file and variable names:</p>
<ol class="arabic simple">
<li><p>Spaces are turned into underscores (e.g. “bonus images” -&gt; “bonus_images”)</p></li>
<li><p>Apostrophes are removed (e.g. “valentine’s day -&gt; “valentines_day”)</p></li>
<li><p>Entire word is in lowercase (e.g. “RFA Bonus” -&gt; “rfa_bonus”)</p></li>
</ol>
<p>So, using the rules above, “new year’s” in the <code class="docutils literal notranslate"><span class="pre">all_albums</span></code> definition will become “new_years”. You can then define the two images and album definition like you did for Emma above:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">image</span> <span class="n">cg_label_new_years</span> <span class="o">=</span> <span class="s2">&quot;Image for your label.png&quot;</span>
<span class="k">image</span> <span class="n">new_years_album_cover</span> <span class="o">=</span> <span class="s2">&quot;Image for your album cover.png&quot;</span>
<span class="k">define</span> <span class="n">new_years_album</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="defining-a-cg">
<h2>Defining a CG<a class="headerlink" href="#defining-a-cg" title="Permalink to this headline">¶</a></h2>
<p>For any CG you would like to show in-game, you must first go to <code class="docutils literal notranslate"><span class="pre">gallery_album_definitions.rpy</span></code> and define an image under the <strong>CGs</strong> header. For this example, a fourth CG in the <strong>Common</strong> album will be added. CG images should take up the entire screen, which is 750x1334 px. CGs of other sizes may not display correctly.</p>
<p>First, define the image:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">image</span> <span class="n">cg</span> <span class="n">common_4</span> <span class="o">=</span> <span class="s2">&quot;CGs/common_album/cg-4.webp&quot;</span>
</pre></div>
</div>
<p>The name of the cg must be <code class="docutils literal notranslate"><span class="pre">cg</span></code> + the name of the album it is found in, minus “album”, plus an underscore and some identifier for the image such as a number (<code class="docutils literal notranslate"><span class="pre">4</span></code>), or a descriptor of the CG. Other possible CG definitions might be:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">image</span> <span class="n">cg</span> <span class="n">common_flower</span> <span class="o">=</span> <span class="s2">&quot;CGs/common_album/cg-flower.webp&quot;</span>
<span class="k">image</span> <span class="n">cg</span> <span class="n">ju_meeting</span> <span class="o">=</span> <span class="s2">&quot;CGs/ju_album/ju-meeting-office.webp&quot;</span>
</pre></div>
</div>
<p>After defining your image, you must add it to the correct album. See <a class="reference internal" href="#adding-a-cg-album"><span class="std std-ref">Adding a CG Album</span></a> for more on creating new albums as well.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">define</span> <span class="n">common_album</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">GalleryImage</span><span class="p">(</span><span class="s2">&quot;cg common_1&quot;</span><span class="p">),</span>
    <span class="n">GalleryImage</span><span class="p">(</span><span class="s2">&quot;cg common_2&quot;</span><span class="p">),</span>
    <span class="n">GalleryImage</span><span class="p">(</span><span class="s2">&quot;cg common_3&quot;</span><span class="p">),</span>
    <span class="n">GalleryImage</span><span class="p">(</span><span class="s2">&quot;cg common_4&quot;</span><span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>In this example, no unique thumbnail was specified. If the program can find an image with the suffix <code class="docutils literal notranslate"><span class="pre">-thumb</span></code> before the file extension, it will use that as the thumbnail. So, since the image is found at “CGs/common_album/cg-4.webp”, the program will look for a thumbnail image at “CGs/common_album/cg-4-thumb.webp”.</p>
<p>Otherwise, you can also manually specify a thumbnail as the third argument to GalleryImage or just by specifying it using <code class="docutils literal notranslate"><span class="pre">thumbnail=</span></code> in the definition:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">GalleryImage</span><span class="p">(</span><span class="s2">&quot;cg common_4&quot;</span><span class="p">,</span> <span class="n">thumbnail</span><span class="o">=</span><span class="s2">&quot;CGs/thumbnails/common_4_thumbnail.webp&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Typically thumbnails are 150x150 px. If one is not provided, the given CG is cropped and resized to the appropriate size.</p>
<p>The full list of arguments to the GalleryImage definition is below:</p>
<dl>
<dt><cite>name</cite></dt><dd><p>A string. Typically this ends up being the same as <code class="docutils literal notranslate"><span class="pre">img</span></code> below if you define your CGs as described above, but you could also do something like:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">GalleryImage</span><span class="p">(</span><span class="s2">&quot;cg common_5&quot;</span><span class="p">,</span> <span class="s2">&quot;CGs/Common/special.webp&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This would have the same effect as if you’d defined <code class="docutils literal notranslate"><span class="pre">cg</span> <span class="pre">common_5</span></code> using the <code class="docutils literal notranslate"><span class="pre">image</span></code> declaration.</p>
</dd>
<dt><cite>img</cite></dt><dd><p>A Displayable, typically a string with the name of the image for this CG as it should appear in the album. Can be omitted if it is the same as <code class="docutils literal notranslate"><span class="pre">name</span></code>. If this is the file path to the image, you should use the <code class="docutils literal notranslate"><span class="pre">name</span></code> property to give the CG a “script-friendly” name, as that’s the one you’ll use to unlock it in-game.</p>
</dd>
<dt><cite>thumbnail</cite></dt><dd><p>Optional. An image path or displayable for the thumbnail as it should appear in the Gallery. Should be 155x155 pixels. If not provided, the CG is scaled and cropped to fit the thumbnail size.</p>
</dd>
<dt><cite>locked_img</cite></dt><dd><p>Optional. The file path to the image that will be used as the “locked” thumbnail icon in the gallery. Should be 155x155 pixels. Typically has a “?” or a locked symbol somewhere to indicate this gallery image hasn’t been unlocked yet.</p>
<p>This is often used to indicate, for example, that an image comes from a particular DLC.</p>
</dd>
<dt><cite>chat_img</cite></dt><dd><p>Optional. A Displayable (typically an image path or string containing the name of a defined image) which will be shown to the player at full-size in the chatroom only. The supplied <code class="docutils literal notranslate"><span class="pre">img</span></code> field will be used when viewing this image full-size in the gallery instead.</p>
<p>Use this to do things like supply blurry or edited CGs in the chatroom, but provide their regular unedited version in the gallery.</p>
</dd>
<dt><cite>chat_preview</cite></dt><dd><p>Optional. A Displayable (typically an image path or string containing the name of a defined image) which will be shown to the player in the chatroom only. Clicking this image will show either <code class="docutils literal notranslate"><span class="pre">chat_img</span></code> (if available) or <code class="docutils literal notranslate"><span class="pre">img</span></code> (if not) full-screen. Typically this is about 35% of the full screen size, or 263x467 pixels, but can be whatever dimensions you like.</p>
<p>Use this to customize the image preview in the chatroom, such as blurring the thumbnail for “spoilers” or to put the thumbnail focus on a particular part of the image.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The equivalent property was called <code class="docutils literal notranslate"><span class="pre">chat_thumb</span></code> in the <code class="docutils literal notranslate"><span class="pre">Album</span></code> object prior to v3.3.0.</p>
</div>
</dd>
</dl>
<p>So, for example, you could define a GalleryImage object like so:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">GalleryImage</span><span class="p">(</span><span class="s2">&quot;cg common_1&quot;</span><span class="p">,</span>
    <span class="n">thumbnail</span><span class="o">=</span><span class="s2">&quot;common_1_thumb&quot;</span><span class="p">,</span>
    <span class="n">chat_img</span><span class="o">=</span><span class="s2">&quot;cg common_1_edit&quot;</span><span class="p">,</span>
    <span class="n">chat_preview</span><span class="o">=</span><span class="s2">&quot;CGs/spoiler_img.png&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>(Note that this assumes you have <code class="docutils literal notranslate"><span class="pre">image</span> <span class="pre">cg</span> <span class="pre">common_1</span> <span class="pre">=</span> <span class="pre">&quot;...&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">image</span> <span class="pre">common_1_thumb</span> <span class="pre">=</span> <span class="pre">&quot;...&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">image</span> <span class="pre">cg</span> <span class="pre">common_1_edit</span> <span class="pre">=</span> <span class="pre">&quot;...&quot;</span></code> etc.)</p>
<p>You would then still be able to use the CG in the usual manner described below to show in chatrooms or text messages.</p>
<div class="section" id="large-thumbnails">
<h3>Large Thumbnails<a class="headerlink" href="#large-thumbnails" title="Permalink to this headline">¶</a></h3>
<p>Recall our additional CG image:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">image</span> <span class="n">cg</span> <span class="n">common_4</span> <span class="o">=</span> <span class="s2">&quot;CGs/common_album/cg-4.webp&quot;</span>
</pre></div>
</div>
<p>For better compatibility with the new profile picture system, you may also want to provide a “larger” version of a thumbnail for use in profile pictures on the profile screen. The program will search for an image with the name of the thumbnail + the suffix <code class="docutils literal notranslate"><span class="pre">-b</span></code> before the file extension. So, if “cg common_4” isn’t given a different thumbnail, it will look for the large version of the thumbnail at “CGs/common_album/cg-4-thumb-b.webp”.</p>
<p>If you provided a different thumbnail, as in <code class="docutils literal notranslate"><span class="pre">GalleryImage(&quot;cg</span> <span class="pre">common_4&quot;,</span> <span class="pre">thumbnail=&quot;CGs/thumbnails/common_4_thumbnail.webp&quot;)</span></code>, then the large version is expected to be called “CGs/thumbnails/common_4_thumbnail-b.webp”.</p>
</div>
<div class="section" id="adding-a-cg-after-starting-the-game">
<h3>Adding a CG After Starting the Game<a class="headerlink" href="#adding-a-cg-after-starting-the-game" title="Permalink to this headline">¶</a></h3>
<p>In some cases, you may not want a CG to appear in a character’s album unless some condition is met, such as a particular DLC being unlocked. In such a case, you can make use of the <code class="docutils literal notranslate"><span class="pre">condition</span></code> property of a <code class="docutils literal notranslate"><span class="pre">GalleryImage</span></code> object.</p>
<p>For example, say you have a variable, <code class="docutils literal notranslate"><span class="pre">persistent.new_years_dlc</span></code>, which tracks whether the player has the New Year’s DLC or not. You only want to show “missing” New Year’s DLC images in their album if they already have the DLC. In such a case, you can do:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">image</span> <span class="n">ja_ny1</span> <span class="o">=</span> <span class="s2">&quot;CGs/Jaehee/ny1.webp&quot;</span>
<span class="k">define</span> <span class="n">ja_album</span> <span class="o">=</span> <span class="p">[</span> <span class="n">GalleryImage</span><span class="p">(</span>
        <span class="s2">&quot;ja_ny1&quot;</span><span class="p">,</span>
        <span class="n">locked_img</span><span class="o">=</span><span class="s2">&quot;CGs/new_years_locked.webp&quot;</span><span class="p">,</span>
        <span class="n">condition</span><span class="o">=</span><span class="s2">&quot;persistent.new_years_dlc&quot;</span>
    <span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This will define a gallery image named “ja_ny1” with the locked thumbnail at “CGs/new_years_locked.webp” and the condition of <code class="docutils literal notranslate"><span class="pre">&quot;persistent.new_years_dlc&quot;</span></code>. The fact that <code class="docutils literal notranslate"><span class="pre">persistent.new_years_dlc</span></code> is in quotes is important - the program uses this to evaluate the condition when it’s going to show the gallery (as opposed to right at the start of the game).</p>
<p>You can use this for more complex conditions as well, so long as they are enclosed in quotes. Some examples:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;&#39;jaehee&#39; in persistent.new_years_dlc_endings&quot;</span>
<span class="s2">&quot;persistent.new_years_dlc_endings &gt;= 1 and persistent.new_years_dlc and &#39;jaehee&#39; in persistent.new_years_dlc&quot;</span>
</pre></div>
</div>
<p>Typically you should use persistent variables for the conditions, because the player can view their album from the main menu as well so any save file-specific values won’t necessarily be used.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The following code <em>will only</em> work if you use the old definition format for albums (namely, the one with a <code class="docutils literal notranslate"><span class="pre">default</span></code> album and a <code class="docutils literal notranslate"><span class="pre">persistent</span></code> version). The updated version of this code (as of v3.3.0) can be found above, and should be used in preference to the version below. The following version is maintained for compatibility purposes only.</p>
</div>
<p>While in most cases you should define your CGs in <code class="docutils literal notranslate"><span class="pre">gallery_album_definitions.rpy</span></code>, you can also add new CGs to an album after the game has already started with the function <code class="docutils literal notranslate"><span class="pre">add_to_album</span></code>. This function takes two parameters:</p>
<dl>
<dt><cite>album</cite></dt><dd><p>The album variable that should contain this new CG.</p>
<p>e.g. <code class="docutils literal notranslate"><span class="pre">ja_album</span></code></p>
</dd>
<dt><cite>photo_list</cite></dt><dd><p>An <code class="docutils literal notranslate"><span class="pre">Album</span></code> or list of <code class="docutils literal notranslate"><span class="pre">Album</span></code> objects which should be added to the given album variable above.</p>
<p>e.g. [ Album(“cg s_4”), Album(“cg s_5”) ]</p>
</dd>
</dl>
<p>Typically you would use this function at the beginning of a route, particularly if the route is DLC since this will allow you to add images to the album without having to directly modify the <code class="docutils literal notranslate"><span class="pre">gallery_album_definitions.rpy</span></code> file. An example may look like:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">new_year_prologue</span><span class="p">():</span>

    <span class="k">$</span> <span class="n">new_route_setup</span><span class="p">(</span><span class="n">route</span><span class="o">=</span><span class="n">new_years_route</span><span class="p">,</span> <span class="n">chatroom_label</span><span class="o">=</span><span class="s1">&#39;new_year_prologue&#39;</span><span class="p">,</span>
    <span class="n">participants</span><span class="o">=</span><span class="p">[</span><span class="n">ja</span><span class="p">])</span>
    <span class="k">$</span> <span class="n">paraphrase_choices</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># Album definitions for this new route</span>
    <span class="k">$</span> <span class="n">add_to_album</span><span class="p">(</span><span class="n">ja_album</span><span class="p">,</span> <span class="n">Album</span><span class="p">(</span><span class="s1">&#39;cg ja_ny_1&#39;</span><span class="p">))</span>
    <span class="k">$</span> <span class="n">add_to_album</span><span class="p">(</span><span class="n">ju_album</span><span class="p">,</span> <span class="n">Album</span><span class="p">(</span><span class="s2">&quot;cg ju_ny_1&quot;</span><span class="p">))</span>
    <span class="k">$</span> <span class="n">add_to_album</span><span class="p">(</span><span class="n">s_album</span><span class="p">,</span> <span class="p">[</span> <span class="n">Album</span><span class="p">(</span><span class="s2">&quot;cg s_ny_1&quot;</span><span class="p">),</span> <span class="n">Album</span><span class="p">(</span><span class="s2">&quot;cg s_ny_2&quot;</span><span class="p">)</span> <span class="p">])</span>

    <span class="k">$</span> <span class="n">character_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">ju</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ja</span><span class="p">,</span> <span class="n">m</span><span class="p">]</span>
    <span class="k">$</span> <span class="n">heart_point_chars</span> <span class="o">=</span> <span class="p">[</span><span class="n">ju</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ja</span><span class="p">]</span>

    <span class="c1"># Route prologue begins here</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="hiding-albums-until-unlocked">
<h2>Hiding Albums Until Unlocked<a class="headerlink" href="#hiding-albums-until-unlocked" title="Permalink to this headline">¶</a></h2>
<p>In some situations, you may want an album to not show up in the player’s photo album until they have unlocked an image contained in it. For example, if you include a New Year’s scenario, you may want to put related CGs in a New Year’s album, but if the player hasn’t unlocked or played through the New Year’s scenario, you don’t want the New Year’s album to show up in their photo album screen.</p>
<p>In this case, you can use the line</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">$</span> <span class="n">hide_albums</span><span class="p">([</span><span class="s2">&quot;new year&#39;s&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>to hide this album unless the player has unlocked a photo in it. The best place to put this is just before setting up a new route e.g.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">$</span> <span class="n">hide_albums</span><span class="p">([</span><span class="s2">&quot;new year&#39;s&quot;</span><span class="p">])</span>
<span class="k">$</span> <span class="n">new_route_setup</span><span class="p">(</span><span class="n">route</span><span class="o">=</span><span class="n">my_new_route</span><span class="p">)</span>
</pre></div>
</div>
<p>If the player has already unlocked images in this album, it will continue to be shown. Otherwise, this album will only appear in the player’s photo album once they have unlocked an image in it (this is taken care of automatically).</p>
<p>Note that since you are passing a list, you can pass multiple albums to be hidden e.g.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">$</span> <span class="n">hide_albums</span><span class="p">([</span><span class="s2">&quot;new year&#39;s&quot;</span><span class="p">,</span> <span class="s2">&quot;christmas&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="showing-a-cg-in-a-chatroom-or-text-message">
<h2>Showing a CG in a Chatroom or Text Message<a class="headerlink" href="#showing-a-cg-in-a-chatroom-or-text-message" title="Permalink to this headline">¶</a></h2>
<p>In chatrooms or text messages, sometimes characters will post images that the player can click on the view full-size. These images will automatically be unlocked in the appropriate Album once the player has seen them.</p>
<p>To show a CG in the chatroom, put the name of the CG in the character’s dialogue e.g.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="s2">&quot;cg common_4&quot;</span> <span class="p">(</span><span class="n">img</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># or with the msg CDS</span>
<span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;cg common_4&quot;</span> <span class="n">img</span>
</pre></div>
</div>
<p>You can also omit <code class="docutils literal notranslate"><span class="pre">cg</span></code> at the beginning, so long as you remember to mark it as an image:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">y</span> <span class="s2">&quot;common_4&quot;</span> <span class="p">(</span><span class="n">img</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">msg</span> <span class="n">z</span> <span class="s2">&quot;common_4&quot;</span> <span class="n">img</span>
</pre></div>
</div>
<p>The program will take care of resizing the CG for the chatroom and allowing the player to view it full-size. It will also unlock the CG in the appropriate album and notify the player if they have not yet seen the image in the album. If this is the first time the player has seen this image, it will also become available for use as a bonus profile picture (see <a class="reference internal" href="miscellaneous.html#bonus-profile-pictures"><span class="std std-ref">Bonus Profile Pictures</span></a>).</p>
<p>You can see an example of a CG posted in a text message in <code class="docutils literal notranslate"><span class="pre">tutorial_3b_VN.rpy</span></code>, and an example of a CG posted during a chatroom in <code class="docutils literal notranslate"><span class="pre">tutorial_5_coffee.rpy</span></code>.</p>
</div>
<div class="section" id="showing-a-cg-during-story-mode">
<h2>Showing a CG during Story Mode<a class="headerlink" href="#showing-a-cg-during-story-mode" title="Permalink to this headline">¶</a></h2>
<p>All you need to do to have an image unlock after showing it in a Story Mode section is to show it to the player. This can be done through the <code class="docutils literal notranslate"><span class="pre">scene</span></code> or <code class="docutils literal notranslate"><span class="pre">show</span></code> statements. <code class="docutils literal notranslate"><span class="pre">scene</span></code> will clear the screen of any existing character sprites/backgrounds etc before showing the image. It’s highly recommended that if you are showing a CG outside of a chatroom that you use the <code class="docutils literal notranslate"><span class="pre">image</span></code> statement to declare a “short” name for the CG (e.g. <code class="docutils literal notranslate"><span class="pre">image</span> <span class="pre">cg</span> <span class="pre">common_4</span> <span class="pre">=</span> <span class="pre">&quot;CGs/Common/com4.webp&quot;</span></code>).</p>
<p>You can display it in script with <code class="docutils literal notranslate"><span class="pre">scene</span></code> or <code class="docutils literal notranslate"><span class="pre">show</span></code>, as mentioned:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">ju</span> <span class="s2">&quot;I wanted to show you how the lounge has been decorated.&quot;</span>
<span class="k">scene</span> <span class="n">cg</span> <span class="n">common_4</span>
<span class="k">show</span> <span class="n">jumin</span> <span class="n">front</span> <span class="n">neutral</span>
<span class="n">ju</span> <span class="s2">&quot;Do you like it?&quot;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">ja</span> <span class="s2">&quot;Oh, no, I&#39;ve spilled the flour everywhere.&quot;</span>
<span class="k">show</span> <span class="n">cg</span> <span class="n">common_4</span>
<span class="n">ja</span> <span class="s2">&quot;Could you get something to clean this up with?&quot;</span>
</pre></div>
</div>
<p>In most cases, you will probably use <code class="docutils literal notranslate"><span class="pre">scene</span></code> to show a CG image to the player instead of <code class="docutils literal notranslate"><span class="pre">show</span></code>.</p>
<p>The CG can be cleared from the screen either by replacing it with another <code class="docutils literal notranslate"><span class="pre">scene</span></code> statement or by explicitly hiding it with <code class="docutils literal notranslate"><span class="pre">hide</span> <span class="pre">cg</span></code>:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="s2">&quot;I wanted to show you how the lounge has been decorated.&quot;</span>
<span class="k">scene</span> <span class="n">cg</span> <span class="n">common_4</span>
<span class="k">show</span> <span class="n">jumin</span> <span class="n">front</span> <span class="n">neutral</span>
<span class="n">ju</span> <span class="s2">&quot;Do you like it?&quot;</span>
<span class="k">scene</span> <span class="n">bg</span> <span class="n">meeting_room</span> <span class="c1"># This clears the CG from the screen</span>
<span class="n">ju</span> <span class="s2">&quot;I think it turned out rather well.&quot;</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">ja</span> <span class="s2">&quot;Oh, no, I&#39;ve spilled the flour everywhere.&quot;</span>
<span class="k">show</span> <span class="n">cg</span> <span class="n">common_4</span>
<span class="n">ja</span> <span class="s2">&quot;Could you get something to clean this up with?&quot;</span>
<span class="k">hide</span> <span class="n">cg</span> <span class="c1"># This clears the CG from the screen</span>
<span class="k">show</span> <span class="n">jaehee</span> <span class="n">happy</span>
<span class="n">ja</span> <span class="s2">&quot;I&#39;m sorry for the trouble.&quot;</span>
</pre></div>
</div>
<p>You can see an example of a CG posted during a Story Mode section in <code class="docutils literal notranslate"><span class="pre">tutorial_8_plot_branches.rpy</span></code>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="miscellaneous.html" class="btn btn-neutral float-right" title="Miscellaneous" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="creating-characters.html" class="btn btn-neutral float-left" title="Creating Characters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Shawna P.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>