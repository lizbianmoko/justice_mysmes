

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Text Messages &mdash; Mysterious Messenger Wiki v3.3.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Story Mode (VN)" href="story-mode.html" />
    <link rel="prev" title="Phone Calls" href="phone-calls.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Mysterious Messenger Wiki
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="Home.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Full Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits-and-acknowledgements.html">Credits and Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginners-guide.html">Beginner’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-setup.html">Git Setup</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="chatrooms.html">Chatrooms</a></li>
<li class="toctree-l1"><a class="reference internal" href="phone-calls.html">Phone Calls</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Text Messages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-compose-text-cds">The compose text CDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#regular-text-messages">Regular Text Messages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sending-a-text-message">Sending a Text Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#replying-to-a-text-message">Replying to a Text Message</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#replying-after-the-first-message">Replying after the first message</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#how-text-message-delivery-works">How Text Message Delivery Works</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#real-time-text-conversations">Real-Time Text Conversations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#writing-a-text-conversation">Writing a Text Conversation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#continuing-a-text-message-conversation">Continuing a Text Message Conversation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#leaving-a-real-time-text-conversation">Leaving a Real-Time Text Conversation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#text-message-backlog">Text Message Backlog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adjusting-timestamps">Adjusting Timestamps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#manually-sending-text-messages">Manually Sending Text Messages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="story-mode.html">Story Mode (VN)</a></li>
<li class="toctree-l1"><a class="reference internal" href="emails.html">Emails</a></li>
<li class="toctree-l1"><a class="reference internal" href="route-setup.html">Setting up a Route</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot-branches.html">Plot Branches</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating-characters.html">Creating Characters</a></li>
<li class="toctree-l1"><a class="reference internal" href="cg-albums.html">CG Albums</a></li>
<li class="toctree-l1"><a class="reference internal" href="miscellaneous.html">Miscellaneous</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mysterious Messenger Wiki</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Text Messages</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/text-messages.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="text-messages">
<h1>Text Messages<a class="headerlink" href="#text-messages" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Navigation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Text Messages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-compose-text-cds">The compose text CDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#regular-text-messages">Regular Text Messages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sending-a-text-message">Sending a Text Message</a></li>
<li class="toctree-l3"><a class="reference internal" href="#replying-to-a-text-message">Replying to a Text Message</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#replying-after-the-first-message">Replying after the first message</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#how-text-message-delivery-works">How Text Message Delivery Works</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#real-time-text-conversations">Real-Time Text Conversations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#writing-a-text-conversation">Writing a Text Conversation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#continuing-a-text-message-conversation">Continuing a Text Message Conversation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#leaving-a-real-time-text-conversation">Leaving a Real-Time Text Conversation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#text-message-backlog">Text Message Backlog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adjusting-timestamps">Adjusting Timestamps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#manually-sending-text-messages">Manually Sending Text Messages</a></li>
</ul>
</li>
</ul>
</div>
<p>There are two kinds of text messaging styles available in this program. The first, referred to as “regular text messages”, delivers text messages in “chunks” which the player can reply to whenever they like. The second style, called “real-time text conversations”, plays out similar to a one-on-one chatroom. The player receives an initial text message, and upon opening the text conversation, cannot leave until the conversation is over or the player chooses to end it themselves.</p>
<div class="section" id="the-compose-text-cds">
<h2>The compose text CDS<a class="headerlink" href="#the-compose-text-cds" title="Permalink to this headline">¶</a></h2>
<p>The main way of writing text messages is with a special <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> CDS that looks like the following example:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">s</span> <span class="n">real_time</span><span class="p">:</span>
    <span class="n">s</span> <span class="s2">&quot;Hi, [name].&quot;</span>
    <span class="n">s</span> <span class="s2">&quot;I wanted to show you how text messages work.&quot;</span>
    <span class="n">s</span> <span class="s2">&quot;Send a reply if you got this message okay!&quot;</span>
    <span class="k">label</span> <span class="n">example_reply_1</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> CDS takes several options, which are explained below.</p>
<dl class="simple">
<dt><cite>who</cite></dt><dd><p>Required. “who” should be the ChatCharacter variable of the character who is taking part in the conversation. e.g. <code class="docutils literal notranslate"><span class="pre">s</span></code></p>
</dd>
<dt><cite>real_time</cite></dt><dd><p>Indicates that this text message should play out as a real-time text conversation. If this option is not present, the conversation is treated as a regular text message.</p>
</dd>
<dt><cite>deliver_at</cite></dt><dd><p>Takes one of four arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">random</span></code> to have the message delivered at a random time after the associated timeline item has been played but before the next one is made available. This is only applicable if the game is being played in real-time mode; otherwise, the message is simply delivered after the timeline item is played.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">next_item</span></code> to have the message delivered at a random time between the timeline item after this one and the item following it. e.g. if there are three items at 11:00, 12:00, and 13:00 and this text is in the <code class="docutils literal notranslate"><span class="pre">after_</span></code> label of the 11:00 item, <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">next_item</span></code> will deliver this message sometime between 12:00 and 13:00, while <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">random</span></code> would deliver the text message sometime between 11:00 and 12:00. This only works when the player is playing in real-time mode; otherwise, the message is simply delivered after its timeline item has been played.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">00:00</span></code> where <code class="docutils literal notranslate"><span class="pre">00:00</span></code> is any time formatted in 24-hour format. For example, <code class="docutils literal notranslate"><span class="pre">14:23</span></code> would cause the message to be delivered at <code class="docutils literal notranslate"><span class="pre">14:23</span></code> in real-time. This only works when the player is playing in real-time mode; otherwise, the message is delivered after the associated timeline item is played.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">now</span></code> to show the player a notification for this text message immediately. <strong>This is intended for use during chatrooms, phone calls, and Story Mode</strong>. The message itself will only be sent after the player completes the story item. If they hang up the call or back out of the chatroom and cause it to expire, the text message will not appear in their inbox. See <a class="reference internal" href="#manually-sending-text-messages"><span class="std std-ref">Manually Sending Text Messages</span></a> for more information.</p></li>
</ul>
</dd>
</dl>
<p>The dialogue inside the <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> block also takes options besides dialogue:</p>
<dl class="simple">
<dt><cite>pause &lt;#&gt;</cite></dt><dd><p>Indicates that the delivery of the item after the pause should wait the given number of seconds before being delivered. This only occurs when the player is playing on real-time mode. <code class="docutils literal notranslate"><span class="pre">pause</span></code> also takes math expressions for the time e.g. <code class="docutils literal notranslate"><span class="pre">pause</span> <span class="pre">2*60</span></code> would cause the following message to be delivered two minutes (120 seconds) after the previous message.</p>
</dd>
<dt><cite>label &lt;labelname&gt;</cite></dt><dd><p>Sets the label the program should jump to in order to continue a conversation or allow the player to reply. <code class="docutils literal notranslate"><span class="pre">labelname</span></code> should not be in quotations. Including a label is optional; excluding it will simply not provide the player with the option to answer the text message.</p>
</dd>
</dl>
<p>Text messages can also include conditional statements to vary dialogue based on certain conditions. An example text message with several of these options combined might look like:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_day_1_4</span><span class="p">:</span>
    <span class="n">compose</span> <span class="k">text</span> <span class="n">ja</span> <span class="n">real_time</span> <span class="n">deliver_at</span> <span class="mi">10</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span>
        <span class="n">ja</span> <span class="s2">&quot;Hello, [name].&quot;</span>
        <span class="k">pause</span> <span class="mi">60</span>
        <span class="n">ja</span> <span class="s2">&quot;I had a moment of time on my break so I thought I would message you.&quot;</span>
        <span class="k">if</span> <span class="n">ja</span><span class="o">.</span><span class="n">heart_points</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;I would have liked to call and hear your voice, but time is short.&quot;</span>
        <span class="k">label</span> <span class="n">day_1_4_ja_msg</span>

    <span class="k">return</span>

<span class="k">label</span> <span class="n">day_1_4_ja_msg</span><span class="p">:</span>
    <span class="n">ja</span> <span class="s2">&quot;What are you doing right now?&quot;</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;Not too much. I&#39;m glad you messaged.&quot;</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;I see. I had a question for you, in fact.&quot;</span>
        <span class="s2">&quot;Perhaps you can call me later?&quot;</span> <span class="k">if</span> <span class="n">ja</span><span class="o">.</span><span class="n">heart_points</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;I would like that very much ^^&quot;</span>
            <span class="n">award</span> <span class="n">heart</span> <span class="n">ja</span>
            <span class="n">ja</span> <span class="s2">&quot;If you don&#39;t mind, I wanted to ask you:&quot;</span>
        <span class="s2">&quot;I&#39;m actually kind of busy at the moment.&quot;</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;Oh, I understand.&quot;</span>
            <span class="n">ja</span> <span class="s2">&quot;I&#39;m sorry to have caught you at a bad time.&quot;</span>
            <span class="n">ja</span> <span class="s2">&quot;Before you go, however, I was hoping to ask:&quot;</span>
    <span class="n">ja</span> <span class="s2">&quot;Do you like coffee?&quot;</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;I love coffee! I drink it every morning.&quot;</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;You do? I think it can be nice to have a morning routine, certainly.&quot;</span>
        <span class="s2">&quot;Only if I can have it with lots of cream and sugar.&quot;</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;Ah, that&#39;s understandable.&quot;</span>
            <span class="n">ja</span> <span class="s2">&quot;Coffee can be rather bitter on its own.&quot;</span>
        <span class="s2">&quot;I drink it straight black.&quot;</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;That&#39;s very bold of you. Some coffees are rather bitter.&quot;</span>
        <span class="s2">&quot;I don&#39;t really like coffee.&quot;</span><span class="p">:</span>
            <span class="n">ja</span> <span class="s2">&quot;I understand. It&#39;s not always to everyone&#39;s taste.&quot;</span>
    <span class="n">ja</span> <span class="s2">&quot;I&#39;m afraid my break is over, but I&#39;m glad I got to talk with you.&quot;</span>
    <span class="n">ja</span> <span class="s2">&quot;I hope we can speak again soon.&quot;</span>

    <span class="k">return</span>
</pre></div>
</div>
<p>In this case, the last message of the <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> block will be the one delivered at the requested time (10:15), so the first message (Hello, [name]) is delivered around 10:14 and the final message at 10:15. The first message may be delivered slightly earlier depending on whether the player has more than 5 heart points with <code class="docutils literal notranslate"><span class="pre">ja</span></code> or not, as the program also calculates roughly how long it would take to type out each message and staggers delivery time accordingly. <code class="docutils literal notranslate"><span class="pre">pause</span></code> allows you to fine-tune this timing.</p>
</div>
<div class="section" id="regular-text-messages">
<h2>Regular Text Messages<a class="headerlink" href="#regular-text-messages" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Example files to look at:</p>
<ul class="simple">
<li><p>tutorial_3_text_message.rpy</p></li>
<li><p>tutorial_3b_VN.rpy</p></li>
<li><p>tutorial_5_coffee.rpy</p></li>
<li><p>tutorial_11_story_call.rpy</p></li>
</ul>
<p><em>A brief overview of the steps required (more detail below):</em></p>
<ol class="arabic">
<li><p>Create a label using the prefix <code class="docutils literal notranslate"><span class="pre">after_</span></code> + the name of the timeline item you want to send the text messages after e.g. <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">after_day_1_4</span></code></p></li>
<li><dl class="simple">
<dt>Write <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span> <span class="pre">z:</span></code> where <code class="docutils literal notranslate"><span class="pre">z</span></code> is the variable for the character who is sending the message.</dt><dd><ol class="arabic simple">
<li><p>Optionally, you can also include arguments to tell the program when to deliver the message. Acceptable options are <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">00:00</span></code> where <code class="docutils literal notranslate"><span class="pre">00:00</span></code> is the time to deliver the message at, in 24-hour time; <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">random</span></code> to deliver the message randomly before the next timeline item, or <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">next_item</span></code> to deliver the message sometime between the next timeline item being available and the one after that.</p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Write dialogue for the conversation, indented at least one level to the right underneath the <code class="docutils literal notranslate"><span class="pre">compose_text</span></code> line. You may also include conditionals here.</dt><dd><ol class="arabic simple">
<li><p>You can also include the <code class="docutils literal notranslate"><span class="pre">pause</span></code> statement with a number of seconds to pause for, e.g. <code class="docutils literal notranslate"><span class="pre">pause</span> <span class="pre">2.0*60</span></code>. The message delivery will be “staggered”, with the message after the pause waiting the given number of seconds before sending.</p></li>
</ol>
</dd>
</dl>
</li>
<li><p>(Optional) Include a label at the end which will be jumped to to continue the conversation e.g. <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">menu1</span></code></p></li>
<li><p>End the <code class="docutils literal notranslate"><span class="pre">after_</span></code> label with a return.</p></li>
<li><p>(Optional) Create the label the player can jump to to continue the conversation.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>(Optional) Allow the player to reply to the text message again by writing <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">s.text_label</span> <span class="pre">=</span> <span class="pre">&quot;menu2&quot;</span></code> where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the variable for the character sending the message and <code class="docutils literal notranslate"><span class="pre">&quot;menu2&quot;</span></code> is the name of the label to jump to to continue the conversation.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>Finish the reply label with <code class="docutils literal notranslate"><span class="pre">return</span></code></p></li>
</ol>
</div>
<div class="section" id="sending-a-text-message">
<h3>Sending a Text Message<a class="headerlink" href="#sending-a-text-message" title="Permalink to this headline">¶</a></h3>
<p>To have a character text the player after a chatroom, the program looks for a label with a special naming convention. For example, if your chatroom is called</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">my_chatroom</span><span class="p">:</span>
</pre></div>
</div>
<p>then you should create a label called</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_my_chatroom</span><span class="p">:</span>
</pre></div>
</div>
<p>Next, inside the <code class="docutils literal notranslate"><span class="pre">after_</span></code> label, use the special <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> CDS:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">s</span><span class="p">:</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the variable for the character who is sending the message. You can then write dialogue the same way as you would for a chatroom, including adding CGs, emojis, and changing fonts. You can use either the spreadsheet style or the <code class="docutils literal notranslate"><span class="pre">msg</span></code> CDS (see <a class="reference internal" href="chatrooms.html#writing-chatroom-dialogue"><span class="std std-ref">Writing Chatroom Dialogue</span></a>).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Text messages currently do not support special speech bubbles.</p>
</div>
<p>Note that all dialogue for a text message should be indented one level to the right so as to be underneath the <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> statement:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;This is an example text message!&quot;</span> <span class="n">curly</span>
    <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;You can write lots of dialogue here.&quot;</span>
    <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;Just make sure it&#39;s indented at the correct level~&quot;</span>
</pre></div>
</div>
<p>Finally, if you would like the player to be able to reply, include the name of a label the program should jump to in order to find that reply:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;This is an example text message!&quot;</span> <span class="n">curly</span>
    <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;You can write lots of dialogue here.&quot;</span>
    <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;Just make sure it&#39;s indented at the correct level~&quot;</span>
    <span class="k">label</span> <span class="n">my_reply_1</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">my_reply_1</span></code> is the name of the label the program should jump to in order to continue this conversation when the player opens the message. If you don’t want the player to be able to reply, then you can simply omit this line. They will be able to read the text messages but won’t be able to respond.</p>
<p>Finally, end the <code class="docutils literal notranslate"><span class="pre">after_</span></code> label with the line <code class="docutils literal notranslate"><span class="pre">return</span></code>.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_my_chatroom</span><span class="p">:</span>

    <span class="n">compose</span> <span class="k">text</span> <span class="n">z</span><span class="p">:</span>
        <span class="n">z</span> <span class="s2">&quot;Hi [name]!&quot;</span>
        <span class="n">z</span> <span class="s2">&quot;Hope your morning has been good so far.&quot;</span>
        <span class="n">z</span> <span class="s2">&quot;Did you eat breakfast yet?&quot;</span>
        <span class="k">label</span> <span class="n">my_reply_1</span>

    <span class="k">return</span>
</pre></div>
</div>
</div>
<div class="section" id="replying-to-a-text-message">
<h3>Replying to a Text Message<a class="headerlink" href="#replying-to-a-text-message" title="Permalink to this headline">¶</a></h3>
<p>If you gave <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> a label, when the player presses “Answer”, the program will jump to that label to continue the conversation. There are no restrictions on what you can call this label, but it’s recommended you come up with a consistent naming scheme to avoid accidentally creating several labels with the same name (which will cause errors).</p>
<p>Create a new reply for the label from your text message:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">my_reply_1</span><span class="p">:</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;No, I haven&#39;t eaten yet.&quot;</span><span class="p">:</span>
            <span class="n">z</span> <span class="s2">&quot;That&#39;s no good! You should eat something soon.&quot;</span>
        <span class="s2">&quot;Yup! I ate as soon as I woke up.&quot;</span><span class="p">:</span>
            <span class="n">z</span> <span class="s2">&quot;That&#39;s good to hear.&quot;</span>
            <span class="n">award</span> <span class="n">heart</span> <span class="n">z</span>
    <span class="n">z</span> <span class="s2">&quot;Eating breakfast in the morning is really important.&quot;</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>For regular text messages, the label should immediately begin with a <code class="docutils literal notranslate"><span class="pre">menu:</span></code> so that the player is presented with a choice of answers. You can add as many or as few options as you wish. The dialogue here is written the same way as chatrooms, including awarding heart points. You can only award one heart point per reply. It can be for a character not in the conversation as well. For more information on heart points, see <a class="reference internal" href="chatrooms.html#showing-a-heart-icon"><span class="std std-ref">Showing a Heart Icon</span></a>.</p>
<p>Finally, end the whole label with <code class="docutils literal notranslate"><span class="pre">return</span></code>.</p>
<div class="section" id="replying-after-the-first-message">
<h4>Replying after the first message<a class="headerlink" href="#replying-after-the-first-message" title="Permalink to this headline">¶</a></h4>
<p>If you want the player to be able to reply again after the first message, you need to tell the program where it can find the label to continue the conversation with <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">z.text_label</span> <span class="pre">=</span> <span class="pre">&quot;menu2&quot;</span></code> where <code class="docutils literal notranslate"><span class="pre">z</span></code> is the variable of the character who is taking part in the conversation and <code class="docutils literal notranslate"><span class="pre">menu2</span></code> is the name of the label to jump to. A text message chain with two opportunities to reply might look like:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_my_chatroom</span><span class="p">:</span>

    <span class="n">compose</span> <span class="k">text</span> <span class="n">z</span><span class="p">:</span>
        <span class="n">z</span> <span class="s2">&quot;Hi [name]!&quot;</span>
        <span class="n">z</span> <span class="s2">&quot;Hope your morning has been good so far.&quot;</span>
        <span class="n">z</span> <span class="s2">&quot;Did you eat breakfast yet?&quot;</span>
        <span class="k">label</span> <span class="n">my_reply_1</span>

    <span class="k">return</span>

<span class="k">label</span> <span class="n">my_reply_1</span><span class="p">:</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;No, I haven&#39;t eaten yet.&quot;</span><span class="p">:</span>
            <span class="n">z</span> <span class="s2">&quot;That&#39;s no good! You should eat something soon.&quot;</span>
        <span class="s2">&quot;Yup! I ate as soon as I woke up.&quot;</span><span class="p">:</span>
            <span class="n">z</span> <span class="s2">&quot;That&#39;s good to hear.&quot;</span>
    <span class="n">z</span> <span class="s2">&quot;Eating breakfast in the morning is really important.&quot;</span>
    <span class="n">z</span> <span class="s2">&quot;Do you have any plans for the day?&quot;</span>
    <span class="k">$</span> <span class="n">z</span><span class="o">.</span><span class="n">text_label</span> <span class="o">=</span> <span class="s2">&quot;my_reply_2&quot;</span>
    <span class="k">return</span>

<span class="k">label</span> <span class="n">my_reply_2</span><span class="p">:</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;Maybe you should call me~&quot;</span><span class="p">:</span>
            <span class="n">z</span> <span class="s2">&quot;!!&quot;</span>
            <span class="n">z</span> <span class="s2">&quot;{image=zen_wink}&quot;</span> <span class="p">(</span><span class="n">img</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">z</span> <span class="s2">&quot;Haha, maybe I will~&quot;</span>
        <span class="s2">&quot;Nah, I&#39;m going to be lazy today.&quot;</span><span class="p">:</span>
            <span class="n">z</span> <span class="s2">&quot;Sometimes it&#39;s nice to have days like that.&quot;</span>
    <span class="n">z</span> <span class="s2">&quot;It was good talking with you!&quot;</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="how-text-message-delivery-works">
<h3>How Text Message Delivery Works<a class="headerlink" href="#how-text-message-delivery-works" title="Permalink to this headline">¶</a></h3>
<p>When you write text messages inside an <code class="docutils literal notranslate"><span class="pre">after_</span></code> label, those messages are added to a “delivery pool” which is delivered to the player in increments after they finish playing the associated timeline item. So, if you composed text messages for characters A, B, and C, the player may receive Character A’s message immediately upon returning to the home screen, and will then receive Character B and C’s messages either by waiting around on the home screen or performing other actions such as replying to other text message or emails.</p>
<p>Similarly, if the player has replied to Character A’s message, Character A’s response gets added to the pool and will eventually be delivered to the player after some time has passed.</p>
<p>All text messages in the delivery pool are immediately delivered as soon as the player clicks to enter the timeline screen.</p>
<p>In this program, there are no time limits on when you can or can’t reply to text messages. However, if a character sends the player a new text message and the player hasn’t replied to the previous conversation, they will no longer be able to continue the older conversation.</p>
</div>
</div>
<div class="section" id="real-time-text-conversations">
<h2>Real-Time Text Conversations<a class="headerlink" href="#real-time-text-conversations" title="Permalink to this headline">¶</a></h2>
<p>Unlike regular text messages, real-time text conversations play out similar to a chatroom with a single character. The player receives a text message, and upon entering the conversation, cannot leave until either the conversation is over or the player exits the conversation manually and the conversation is lost.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Example files to look at:</p>
<ul class="simple">
<li><p>tutorial_3_text_message.rpy</p></li>
<li><p>tutorial_3b_VN.rpy</p></li>
<li><p>tutorial_5_coffee.rpy</p></li>
<li><p>tutorial_11_story_call.rpy</p></li>
</ul>
<p><em>A brief overview of the steps required (more detail below):</em></p>
<ol class="arabic">
<li><p>Create a label using the prefix <code class="docutils literal notranslate"><span class="pre">after_</span></code> + the name of the timeline item you want to send the text messages after e.g. <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">after_day_1_4</span></code></p></li>
<li><p>Write <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span> <span class="pre">z</span> <span class="pre">real_time:</span></code> where <code class="docutils literal notranslate"><span class="pre">z</span></code> is the variable for the character who is sending the message.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Optionally, you can also include arguments to tell the program when to deliver the message. Acceptable options are <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">00:00</span></code> where <code class="docutils literal notranslate"><span class="pre">00:00</span></code> is the time to deliver the message at, in 24-hour time; <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">random</span></code> to deliver the message randomly before the next timeline item, or <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">next_item</span></code> to deliver the message sometime between the next timeline item being available and the one after that.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>Write dialogue for the conversation, indented at least one level to the right underneath the <code class="docutils literal notranslate"><span class="pre">compose_text</span></code> line. You may also include conditionals here.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>You can also include the <code class="docutils literal notranslate"><span class="pre">pause</span></code> statement with a number of seconds to pause for, e.g. <code class="docutils literal notranslate"><span class="pre">pause</span> <span class="pre">2.0*60</span></code>. The message delivery will be “staggered”, with the message after the pause waiting the given number of seconds before sending.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>(Optional) Include a label at the end which will be jumped to to continue the conversation e.g. <code class="docutils literal notranslate"><span class="pre">label</span> <span class="pre">menu1</span></code></p></li>
<li><p>End the <code class="docutils literal notranslate"><span class="pre">after_</span></code> label with a return.</p></li>
<li><p>(Optional) Create the label the player can jump to to continue the conversation.</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>(Optional) Allow the player to reply to the text message again by writing <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">s.text_label</span> <span class="pre">=</span> <span class="pre">&quot;menu2&quot;</span></code> where <code class="docutils literal notranslate"><span class="pre">s</span></code> is the variable for the character sending the message and <code class="docutils literal notranslate"><span class="pre">&quot;menu2&quot;</span></code> is the name of the label to jump to to continue the conversation.</p></li>
</ol>
</div></blockquote>
</li>
<li><p>Finish the reply label with <code class="docutils literal notranslate"><span class="pre">return</span></code></p></li>
</ol>
</div>
<div class="section" id="writing-a-text-conversation">
<h3>Writing a Text Conversation<a class="headerlink" href="#writing-a-text-conversation" title="Permalink to this headline">¶</a></h3>
<p>To have a character initiate a text conversation, like with regular text messages, you need to have a label that follows a specific naming convention. For example, if your timeline item is called</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">casual_route_2_4</span><span class="p">:</span>
</pre></div>
</div>
<p>then you need to create a label called</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_casual_route_2_4</span><span class="p">:</span>
</pre></div>
</div>
<p>Then you will compose the text message. This uses a special <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> CDS:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">ju</span> <span class="n">real_time</span><span class="p">:</span>
    <span class="n">ju</span> <span class="s2">&quot;I didn&#39;t understand what Luciel wrote in the chatroom earlier.&quot;</span>
    <span class="n">ju</span> <span class="s2">&quot;What exactly does &#39;yeet&#39; mean?&quot;</span>
</pre></div>
</div>
<p>The main difference between this and regular text messages is the addition of the <code class="docutils literal notranslate"><span class="pre">real_time</span></code> option. This tells the program that this conversation will play out in real time once the player enters the conversation rather than having all the messages delivered at once.</p>
<p>Dialogue underneath the <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> statement can be written the same way as it is for chatrooms, and allows the use of both the spreadsheet style as well as the <code class="docutils literal notranslate"><span class="pre">msg</span></code> CDS. Text message conversations can also have CGs, emojis, and special fonts.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Text messages currently do not support special speech bubbles.</p>
</div>
<p>Any dialogue written under the <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> statement will show up as “backlog” before the user enters the conversation, so it is usually brief.</p>
<p>You can compose text messages for as many characters as you like, and mix and match regular text messages with real-time text conversations freely. There are also additional options available to you for scheduling when the first text message is delivered. See <a class="reference internal" href="#the-compose-text-cds"><span class="std std-ref">The compose text CDS</span></a> for more.</p>
</div>
<div class="section" id="continuing-a-text-message-conversation">
<h3>Continuing a Text Message Conversation<a class="headerlink" href="#continuing-a-text-message-conversation" title="Permalink to this headline">¶</a></h3>
<p>To allow the player to continue the text message conversation, you must provide a label for the program to jump to when the player opens that text message. This is done with the <code class="docutils literal notranslate"><span class="pre">label</span></code> argument inside the <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> CDS:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">ju</span> <span class="n">real_time</span><span class="p">:</span>
    <span class="n">ju</span> <span class="s2">&quot;I didn&#39;t understand what Luciel wrote in the chatroom earlier.&quot;</span>
    <span class="n">ju</span> <span class="s2">&quot;What exactly does &#39;yeet&#39; mean?&quot;</span>
    <span class="k">label</span> <span class="n">casual_2_4_ju_reply</span>
</pre></div>
</div>
<p>The program will then jump to the label <code class="docutils literal notranslate"><span class="pre">casual_2_4_ju_reply</span></code> to continue the conversation. You will write dialogue inside the label identically to a chatroom:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">after_casual_route_2_4</span><span class="p">:</span>
    <span class="n">compose</span> <span class="k">text</span> <span class="n">ju</span> <span class="n">real_time</span><span class="p">:</span>
        <span class="n">msg</span> <span class="n">ju</span> <span class="s2">&quot;I didn&#39;t understand what Luciel wrote in the chatroom earlier.&quot;</span>
        <span class="n">msg</span> <span class="n">ju</span> <span class="s2">&quot;What exactly does &#39;yeet&#39; mean?&quot;</span> <span class="n">ser1</span>
        <span class="k">label</span> <span class="n">casual_2_4_ju_reply</span>

    <span class="k">return</span>

<span class="k">label</span> <span class="n">casual_2_4_ju_reply</span><span class="p">:</span>
    <span class="n">msg</span> <span class="n">ju</span> <span class="s2">&quot;I tried to search the Urban Dictionary, but I didn&#39;t understand the results.&quot;</span> <span class="n">ser1</span>
    <span class="k">menu</span><span class="p">:</span>
        <span class="s2">&quot;You say it when you throw something.&quot;</span><span class="p">:</span>
            <span class="n">ju</span> <span class="s2">&quot;When you throw something?&quot;</span>
            <span class="n">ju</span> <span class="s2">&quot;Hmm. I don&#39;t know if I really understand.&quot;</span>
            <span class="n">ju</span> <span class="s2">&quot;But thank you for attempting to explain, nevertheless.&quot;</span>
            <span class="n">award</span> <span class="n">heart</span> <span class="n">ju</span>
        <span class="s2">&quot;lololol you&#39;re so funny Jumin.&quot;</span><span class="p">:</span>
            <span class="n">ju</span> <span class="s2">&quot;It was not my intention to be a source of entertainment.&quot;</span>
            <span class="n">ju</span> <span class="s2">&quot;But I suppose I am glad if I was able to bring some levity to your day.&quot;</span>
    <span class="n">msg</span> <span class="n">ju</span> <span class="s2">&quot;Perhaps I will ask Assistant Kang for further clarification.&quot;</span> <span class="n">ser1</span>
    <span class="k">return</span>
</pre></div>
</div>
<p>You can add additional dialogue after the reply label, and as many or as few menus (for choices) as you like. Unlike with regular text messages, because the conversation occurs in real time, you may also award or take away heart points as many times as you like during the conversation using <code class="docutils literal notranslate"><span class="pre">award</span> <span class="pre">heart</span></code> and <code class="docutils literal notranslate"><span class="pre">break</span> <span class="pre">heart</span></code>. The whole label should end with <code class="docutils literal notranslate"><span class="pre">return</span></code>.</p>
</div>
<div class="section" id="leaving-a-real-time-text-conversation">
<h3>Leaving a Real-Time Text Conversation<a class="headerlink" href="#leaving-a-real-time-text-conversation" title="Permalink to this headline">¶</a></h3>
<p>Since real-time text conversations function more closely to chatrooms, if the player clicks the “Back” button during a real-time text conversation, they will be asked if they’d like to end the conversation.</p>
<p><strong>Backing out of a real-time text conversation means that conversation will no longer be available to continue</strong>, though the player will retain any heart points or CGs they unlocked before they exited the conversation. There is no option to “replay” text message conversations, but unlike chatrooms a text message conversation does not expire until another text message overwrites it.</p>
</div>
</div>
<div class="section" id="text-message-backlog">
<h2>Text Message Backlog<a class="headerlink" href="#text-message-backlog" title="Permalink to this headline">¶</a></h2>
<p>If you would like text messages to appear as “backlog” in the player’s text message inbox to serve as backstory or to set up a route, there is a special CDS to make writing this easier. You can set the text message timestamps to be several real-life days in the past, and even specify what time a message should appear to be sent at:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">add</span> <span class="n">backlog</span> <span class="n">s</span> <span class="o">-</span><span class="mi">4</span> <span class="k">time</span> <span class="mi">23</span><span class="p">:</span><span class="mi">22</span><span class="p">:</span>
     <span class="n">s</span> <span class="s2">&quot;do u think Jumin would hire me as his assistant?&quot;</span>
     <span class="n">msg</span> <span class="n">s</span> <span class="s2">&quot;Maybe he&#39;d even let me take care of Elly for him ^^&quot;</span> <span class="n">curly</span>
     <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">heart_points</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="k">or</span> <span class="n">ju</span><span class="o">.</span><span class="n">heart_points</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
         <span class="n">m</span> <span class="s2">&quot;Not really likely, no&quot;</span>
         <span class="n">s</span> <span class="s2">&quot;Aw T_T&quot;</span>
         <span class="n">s</span> <span class="s2">&quot;I would be such a good worker!!&quot;</span>
     <span class="k">else</span><span class="p">:</span>
         <span class="n">m</span> <span class="s2">&quot;You&#39;d be such a good cat mom!!&quot;</span>
         <span class="n">s</span> <span class="s2">&quot;Right???&quot;</span>
         <span class="n">s</span> <span class="s2">&quot;Maybe I should ask to be hired as his cat nanny.&quot;</span>
         <span class="n">s</span> <span class="s2">&quot;He needs a cat nanny, doesn&#39;t he?&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">add</span> <span class="pre">backlog</span></code> takes the following options:</p>
<dl>
<dt><cite>who</cite></dt><dd><p>The character whose text message this backlog is being added to. Should be a ChatCharacter object.</p>
<p>e.g. s</p>
</dd>
<dt><cite>day</cite></dt><dd><p>Optional. An integer representing the number of days from the present day this message should be sent at. Negative numbers indicate a number of days in the past e.g. <code class="docutils literal notranslate"><span class="pre">-1</span></code> indicates the message should have a timestamp indicating it was sent yesterday (1 day ago). If not present, the message will appear to be sent on the current date.</p>
<p>e.g. -7</p>
</dd>
<dt><cite>time ##:##</cite></dt><dd><p>Optional. A timestamp in 24-hour format that indicates the time this first message should appear to have been sent at. Requires a leading zero for times &lt; 10am e.g. 1:05 AM is written as <code class="docutils literal notranslate"><span class="pre">01:05</span></code> and 1:30 PM is written as <code class="docutils literal notranslate"><span class="pre">13:30</span></code>.</p>
<p>e.g. time 05:16</p>
</dd>
</dl>
<p>Next, you will write the dialogue for the text messages. These are written like regular text messages, and you can use both the <code class="docutils literal notranslate"><span class="pre">msg</span></code> CDS as well as the spreadsheet method to write dialogue.</p>
<p>The text message backlog statement <strong>does not</strong> support the use of Python, jumps, or many other features besides dialogue inside the text message block; these messages are intended to be used as setup and are not part of active conversations, so any Python or calculations should be done outside of the <code class="docutils literal notranslate"><span class="pre">add</span> <span class="pre">backlog</span></code> CDS.</p>
<p>However, the <code class="docutils literal notranslate"><span class="pre">add</span> <span class="pre">backlog</span></code> CDS <strong>does</strong> support conditional if/elif/else statements so that you can vary messages based on certain conditions. In the example at the top of this section, you can see that the message varies based on the number of heart points the player has with certain characters.</p>
<p><code class="docutils literal notranslate"><span class="pre">add</span> <span class="pre">backlog</span></code> does not support adding labels to jump to in order to reply to a conversation, as it is intended to setup “past” conversations. <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> is suitable for creating conversations that the player may respond to (see <a class="reference internal" href="#the-compose-text-cds"><span class="std std-ref">The compose text CDS</span></a>).</p>
<div class="section" id="adjusting-timestamps">
<h3>Adjusting Timestamps<a class="headerlink" href="#adjusting-timestamps" title="Permalink to this headline">¶</a></h3>
<p>All lines, regardless of the way they’re written, take the special option <code class="docutils literal notranslate"><span class="pre">time</span></code> after the dialogue. This allows you to further customize when the messages are sent at e.g.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">add</span> <span class="n">backlog</span> <span class="n">ja</span> <span class="o">-</span><span class="mi">13</span><span class="p">:</span>
    <span class="n">m</span> <span class="s2">&quot;Good luck for your first day at the new job, Jaehee ^^&quot;</span> <span class="k">time</span> <span class="mi">07</span><span class="p">:</span><span class="mi">03</span>
    <span class="n">ja</span> <span class="s2">&quot;Thank you very much, [name]&quot;</span> <span class="k">time</span> <span class="mi">07</span><span class="p">:</span><span class="mi">15</span>
    <span class="n">ja</span> <span class="s2">&quot;{image=jaehee_happy}&quot;</span>
    <span class="n">ja</span> <span class="s2">&quot;I will do my best!&quot;</span> <span class="k">time</span> <span class="mi">07</span><span class="p">:</span><span class="mi">18</span>
</pre></div>
</div>
<p>The above example will have a timestamp 13 days in the past at 7:03 AM for the first message from the MC. The next message, from Jaehee, is also 13 days in the past but has a timestamp for 7:15 AM. The third message does not have an explicit timestamp, so the program will calculate a brief delay between the time given for the previous message and the time the program estimates it would take someone to write the current message. Since Jaehee is merely posting an emoji, this delay will be under a minute long so it will likely also have a timestamp of 7:15 AM. Finally, the last message has a timestamp at 7:18 AM.</p>
<p>Additionally, there is the special line <code class="docutils literal notranslate"><span class="pre">pause</span></code> which will cause the program to add the given number of seconds to the timestamp just after the pause statement. For example:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">add</span> <span class="n">backlog</span> <span class="n">ju</span> <span class="o">-</span><span class="mi">17</span> <span class="k">time</span> <span class="mi">20</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span>
    <span class="n">ju</span> <span class="s2">&quot;Good evening, [name].&quot;</span>
    <span class="n">ju</span> <span class="s2">&quot;You&#39;ve been with the RFA for a month now so I hoped to ask you a question.&quot;</span>
    <span class="k">pause</span> <span class="mi">110</span>
    <span class="n">m</span> <span class="s2">&quot;What is it?&quot;</span>
    <span class="k">pause</span> <span class="mi">60</span><span class="o">*</span><span class="mi">2</span>
    <span class="n">ju</span> <span class="s2">&quot;Would you consider a position at C&amp;R International?&quot;</span>
</pre></div>
</div>
<p>The first message will have a timestamp of 20:32. The second message will take a few seconds to write but likely under a minute, so it will have a timestamp of 20:32 as well. After that, there is a pause statement for 110 seconds. This guarantees that the program will add 110 seconds to its calculation of how long the next message should take to type, so the MC’s message will have a timestamp of 20:34.</p>
<p>Finally, after the MC’s line there is a pause of 60*2 seconds, so 2 minutes. This will force an additional two-minute delay between the timestamp of the next message, from Jumin, and the MC’s message. The last message from Jumin should have a time stamp of 20:36.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The program will add several seconds to each backlog message’s timestamp from the initial start timestamp unless an exact <code class="docutils literal notranslate"><span class="pre">time</span></code> argument is given. The exact number of seconds depends on the length of the message. This means that if a character has 10 messages in their text message backlog, there is likely to be at least a minute or more of difference in the timestamps of later messages to simulate the real-life time it would take to type out all 10 messages.</p>
</div>
</div>
</div>
<div class="section" id="manually-sending-text-messages">
<h2>Manually Sending Text Messages<a class="headerlink" href="#manually-sending-text-messages" title="Permalink to this headline">¶</a></h2>
<p>Normally, the program will take care of text message delivery after a story item. This allows for consistency across real-time and sequential play styles, as the program can execute an item’s <code class="docutils literal notranslate"><span class="pre">after_</span></code> label without needing to check through its entire story label. However, there may be some situations where you prefer that a character sends a text message in response to some immediate event. For that, you can use the special delivery time <code class="docutils literal notranslate"><span class="pre">deliver_at</span> <span class="pre">now</span></code> to trigger a text message to send immediately.</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">label</span> <span class="n">day_4_chatroom_5_incoming_y</span><span class="p">():</span>
    <span class="n">y</span> <span class="s2">&quot;[name]!! I thought of a really funny thing I wanted to share with you.&quot;</span>
    <span class="n">y</span> <span class="s2">&quot;Um, one sec, I&#39;ll message you the picture.&quot;</span>
    <span class="n">compose</span> <span class="k">text</span> <span class="n">y</span> <span class="n">deliver_at</span> <span class="n">now</span><span class="p">:</span>
        <span class="n">y</span> <span class="s2">&quot;look at this lolol&quot;</span>
        <span class="n">y</span> <span class="s2">&quot;common_3&quot;</span> <span class="n">img</span>
    <span class="n">y</span> <span class="s2">&quot;It&#39;s good, right? I thought it was really creative.</span>
</pre></div>
</div>
<p>In the above example, Yoosung sends the player a text message during a phone call. After Yoosung says “Um, one sec, I’ll message you the picture.” the player will see a text message popup with a preview of the last text message (in this case, because Yoosung sent an image, it will say “Yoosung sent an image.”). This popup is non-interactive; there will not be a button to take the player to the text message immediately and they will need to wait until the phone call is over.</p>
<p>Note also that text messages sent in this way will only actually be delivered to the player’s inbox if they complete the story item where the text message occurs. If they end or jump out of the story item prematurely, such as by hanging up or hitting the back button on chatrooms, the text messages will not be sent even though the player saw a notification during the story item itself. This prevents the player from accumulating a bunch of text messages without properly completing the story item.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Only the last message in a <code class="docutils literal notranslate"><span class="pre">compose</span> <span class="pre">text</span></code> block will be shown as a preview to the player. If you want to show them multiple message popups, you’ll need to do so individually like:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="n">compose</span> <span class="k">text</span> <span class="n">u</span> <span class="n">deliver_at</span> <span class="n">now</span><span class="p">:</span>
    <span class="n">u</span> <span class="s2">&quot;Ah, I found you.&quot;</span>
<span class="n">z</span> <span class="s2">&quot;Anyway, I&#39;ve talked about myself so much aha.&quot;</span>
<span class="n">z</span> <span class="s2">&quot;So what are you up to?&quot;</span>
<span class="n">compose</span> <span class="k">text</span> <span class="n">u</span> <span class="n">deliver_at</span> <span class="n">now</span><span class="p">:</span>
    <span class="n">u</span> <span class="s2">&quot;You should log out now. I&#39;ll be there soon.&quot;</span>
<span class="k">return</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="story-mode.html" class="btn btn-neutral float-right" title="Story Mode (VN)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="phone-calls.html" class="btn btn-neutral float-left" title="Phone Calls" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Shawna P.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>